#!/usr/bin/env bash

# Keep npm up-to-date and use pnpm drop-in replacement
command npm install -g npm pnpm

PACKAGES=()
__add_package() {
  PACKAGES+=($1)
}
__ensure_package_installed() {
  __add_package "$1"
}

# ----------------------
# | Add packages below |
# ----------------------

__ensure_package_installed "diff-so-fancy"
__ensure_package_installed "gitbook-cli"
__ensure_package_installed "git-guilt"
__ensure_package_installed "eslint"
__ensure_package_installed "lighthouse"
__ensure_package_installed "spoof"
__ensure_package_installed "grunt-cli"
__ensure_package_installed "gulp-cli"
__ensure_package_installed "ember-cli"
__ensure_package_installed "broccoli-cli"
__ensure_package_installed "netlify-cli"
__ensure_package_installed "phantomjs-prebuilt"
__ensure_package_installed "firebase-tools"
__ensure_package_installed "dockerlint"
__ensure_package_installed "htmlhint"
__ensure_package_installed "jsonlint"

# ------------------------
# | Done adding packages |
# ------------------------

if [ ${#PACKAGES[@]} -eq 0 ]; then
  cat <<MSG

PACKAGES: none

MSG
else
  cat <<MSG

PACKAGES: ${PACKAGES[@]}

MSG
fi
__add_package "yarn"

pnpm install -g "${PACKAGES[@]}"

