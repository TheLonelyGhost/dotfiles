#!/bin/bash
set -e

export GOPATH="${GOPATH:-"${HOME}/.go"}"

PACKAGES=()
__add_package() {
  PACKAGES+=($1)
}

# ----------------------
# | Add packages below |
# ----------------------

if ! command -v tag &>/dev/null; then
  __add_package "github.com/aykamko/tag"
fi
if ! command -v jid &>/dev/null; then
  __add_package "github.com/simeji/jid/cmd/jid"
fi
if ! command -v gometalinter &>/dev/null; then
  __add_package "gopkg.in/alecthomas/gometalinter.v1"
fi

# ------------------------
# | Done adding packages |
# ------------------------

if [ ! "${#PACKAGES[@]}" -eq 0 ]; then
  printf '>>  %s\n' "PACKAGES: ${PACKAGES[*]}"

  go get -u "${PACKAGES[@]}"

  printf '>>  %s\n' 'Go packages installed.'
fi

