#!/bin/bash
set -e

PACKAGES=()
function __add_package() {
  PACKAGES+=($1)
}

# ----------------------
# | Add packages below |
# ----------------------

__add_package "flake8"
__add_package "neovim"
__add_package "vim-vint"
__add_package "mkdocs"

if ! command -v 'mitmproxy' &>/dev/null; then
  # Homebrew has some funky stuff and it's preferable to install it that route, whenever possible
  __add_package "mitmproxy"
fi

# ------------------------
# | Done adding packages |
# ------------------------

cat <<MSG

PACKAGES: ${PACKAGES[@]}

MSG

pip install --user "${PACKAGES[@]}" | grep -v 'Requirement already satisfied' \
  || true
pip install --user -U "${PACKAGES[@]}" | grep -v 'Requirement already up-to-date' \
  || true

